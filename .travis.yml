# Based on https://github.com/NOAA-ORR-ERD/gridded/blob/master/.travis.yml
# and https://github.com/MPAS-Dev/MPAS-Analysis/blob/develop/.travis.yml
# and https://github.com/MPAS-Dev/MPAS-Tools/blob/master/.travis.yml
language: minimal

sudo: false

notifications:
  email: false

matrix:
  fast_finish: true
  include:
    - name: "python3.6"
    - name: "python3.7"
    - name: "python3.8"

env:
  global:
    secure: "ioCz8aqCE0AOjEkJ08kKQ1yJIE5mDeLGxEuxgf3iumZSlcFkLhhrn3ZXNZCGA2Mun7uWyPW4eKr2YgHhquE3F7TUrSworKHMWQ7z3j3nKes+0SwCYxr1ATBm8uonBSaMZq5Vqs6WJEYTsugogW+lzBEO3eqpnOgUd7YJVHsluz50dmfszMq5LN3MRPrqer33ak21vLHZGIUnIxOCtNL9gOcSGhLay/RC2rk7vnEEMgjp1EKaYqZictneLJyq3IOjyyobj1FvTF4untY1vMHveTA+Pw5nhIfDwxmJDz3TdeS5u0/t/0Z4sY5wI357mDUZkWcgCf3VwxSctbq0rthrEluTdAZ2AriP3s9fqSUfkInqinY20FwnuTwfL/onc6e3VCVPS5v3ZSC296VrvuQEghS2m//lv1RZ7eBgPAyFa3gRInXSH3OcCU68u8i4qHQAzvXxyNitOdlF2zmY21croaxlACXDMZ8F8LgR3V93YSru0IjkUezk2ZCC8E5ZZR9ZyS+miyPYKUY6NBQZRSjbbuEiKR/fD4297k9bZ8h917dtiw8nDPnFeGBVCVHd6DW1gpa7kv4ECQ47tMjCbM8zis6fkXoOo42Mlb+tzdZWbNUp3N/Tga3cNT2EwzPLCQ5bzdVeXdlj868o8GxlwHNNekki/efJjTj1X702LCpilZo="

before_install:
  - |
    wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh
    bash miniconda.sh -b -p $HOME/miniconda
    source $HOME/miniconda/etc/profile.d/conda.sh
    conda activate base
    conda config --set always_yes yes --set changeps1 no --set show_channel_urls true
    conda update conda
    conda config --add channels conda-forge --force
    conda config --set channel_priority strict
    conda install conda-build

install:
  - "./travis_ci/install.bash"

script:
  - "./travis_ci/test_and_publish_docs.bash"